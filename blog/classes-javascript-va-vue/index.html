<!DOCTYPE html>
<html lang="vi">
<head><head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Classes Javascript và Vue.js -Dang Thanh Blog</title>
  <meta name="description" content="Blog chia sẻ về web và phát triển web">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="apple-touch-icon" sizes="57x57" href="/images/favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/images/favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/images/favicon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/images/favicon/manifest.json">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/images/favicon/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  
  <link rel="stylesheet" href="https://dangthanh.org/css/anitya.min.fae8a8668f86bb7645232066a03dc8246b767c120a851e8e61d596ec13b1d6f2.css" integrity="sha256-&#43;uioZo&#43;Gu3ZFIyBmoD3IJGt2fBIKhR6OYdWW7BOx1vI=">
  <link href="" rel="alternate" type="application/rss+xml" title="Dang Thanh Blog">
  
<script defer>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
})(window,document.documentElement,'async-hide','dataLayer',4000,
{'GTM-WZ7SGCR':true});</script>
<script defer>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-41117458-1', 'auto');
  ga('require', 'GTM-WZ7SGCR');
  ga('send', 'pageview');
</script>


  
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-0445843198703009",
    enable_page_level_ads: true
  });
</script>


</head>
<body>
  <div class="site"><header role="banner" class="site-header">
  <div class="site-logo">
      <a href="/">DT</a>
  </div>
  <nav role="navigation" class="site-nav">
    <ul class="no-list m-0 p-0">
      <li>
        <a href="/" data-link="home" class="no-underline hover:line-through">Bài viết</a>
      </li>
      <li>
        <a href="/tags" data-link="tags" class="no-underline hover:line-through">Danh mục</a>
      </li>
      <li>
        <a href="/archives" data-link="archives" class="no-underline hover:line-through">Lưu trữ</a>
      </li>
      <li>
        <a href="/about" data-link="about" class="no-underline hover:line-through">Về tôi</a>
      </li>
    </ul>
  </nav>
</header>
<main role="main" class="site-main">
      <div id="main">
        <c-appearance></c-appearance><div class="article article-single" itemscope itemtype="//schema.org/Article">
    
      <h2 itemprop="headline">Classes Javascript và Vue.js</h2>
    

    <div class="article-body" itemprop="articleBody">
      

<p>Trước tôi đã giới thiệu cho các bạn về <a href="/blog/bat-dau-voi-vue/#2-components">Component trong Vue.js</a>. Bây giờ chúng ta thử tạo một component để tạo một <em>User</em> như sau:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;text&#34;</span> <span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&#34;user.firstName&#34;</span><span class="err">/&gt;</span>
  <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;text&#34;</span> <span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&#34;user.lastName&#34;</span><span class="err">/&gt;</span>
  <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;text&#34;</span> <span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&#34;user.hobby&#34;</span><span class="err">/&gt;</span>
  <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">v</span><span class="o">-</span><span class="nx">show</span><span class="o">=</span><span class="s2">&#34;fullName&#34;</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">fullName</span> <span class="p">}}</span><span class="o">&lt;</span><span class="err">/span&gt;</span>
  <span class="o">&lt;</span><span class="nx">button</span> <span class="err">@</span><span class="nx">click</span><span class="p">.</span><span class="nx">prevent</span><span class="o">=</span><span class="s2">&#34;handlerAddNewUser&#34;</span><span class="o">&gt;</span><span class="nx">Add</span> <span class="nx">New</span> <span class="nx">User</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="o">&lt;</span><span class="err">/form&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="nx">UserService</span> <span class="nx">from</span> <span class="s1">&#39;@services/user&#39;</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Comment&#39;</span><span class="p">,</span>
  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">user</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">fistName</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">hobby</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">created</span><span class="o">:</span> <span class="mi">0</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">computed</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">fullName</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="si">}</span><span class="sb">`</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
    <span class="kr">async</span> <span class="nx">handlerAddNewUser</span><span class="p">()</span> <span class="p">{</span>
      <span class="kr">await</span> <span class="nx">UserService</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/add&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">firstName</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">firstName</span><span class="p">,</span>
        <span class="nx">lastName</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">lastName</span><span class="p">,</span>
        <span class="nx">hobby</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">hobby</span><span class="p">,</span>
        <span class="nx">created</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span>
      <span class="p">});</span>
  
      <span class="c1">// Reset form
</span><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">hobby</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>
<p>Component viết kiểu này chúng ta rất hay thường dùng. Code trên vẫn chạy ổn.</p>

<p>Vấn đề ở đây chũng ta sẽ gặp phải là:</p>

<ul>
<li>Component càng ngày càng phát triển, và có thể sẽ có thêm nhiều thuộc tính Comment nữa</li>
<li>Ở đây chúng ta lặp đi lặp lại <code>this.user</code> và có thể dẫn đến một số lỗi không mong muốn như dễ dàng bỏ qua một vài thuộc tính khi có nhiều đoạn code hơn.</li>
<li>Không thể tái sử dụng những hàm logic cho các component khác.</li>
</ul>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes">Classes JavaScript</a> là một tính năng được giới thiệu trong ECMAScript 2015 (hay thường gọi là ES6). Và ở đây tôi sử dụng Classess của ES6 để khắc phục những vấn đề trên và sử dụng chung với Vue.js</p>

<p>Đầu tiên tôi sẽ khởi tạo một classes như sau:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">class</span> <span class="nx">User</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">user</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">?</span> <span class="nx">user</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">?</span> <span class="nx">user</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">hobby</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">hobby</span> <span class="o">?</span> <span class="nx">user</span><span class="p">.</span><span class="nx">hobby</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">created</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">get</span> <span class="nx">fullName</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="si">}</span><span class="sb">`</span>
  <span class="p">}</span>

  <span class="nx">createPayload</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">firstName</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span><span class="p">,</span>
      <span class="nx">lastName</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">,</span>
      <span class="nx">hobby</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">hobby</span><span class="p">,</span>
      <span class="nx">created</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Giờ ta sẽ trở lại với Component ở trên</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;text&#34;</span> <span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&#34;user.firstName&#34;</span><span class="err">/&gt;</span>
  <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;text&#34;</span> <span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&#34;user.lastName&#34;</span><span class="err">/&gt;</span>
  <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;text&#34;</span> <span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&#34;user.hobby&#34;</span><span class="err">/&gt;</span>
  <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">v</span><span class="o">-</span><span class="nx">show</span><span class="o">=</span><span class="s2">&#34;user.name&#34;</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="p">}}</span><span class="o">&lt;</span><span class="err">/span&gt;</span>
  <span class="o">&lt;</span><span class="nx">button</span> <span class="err">@</span><span class="nx">click</span><span class="p">.</span><span class="nx">prevent</span><span class="o">=</span><span class="s2">&#34;handlerAddNewUser&#34;</span><span class="o">&gt;</span><span class="nx">Add</span> <span class="nx">New</span> <span class="nx">User</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="o">&lt;</span><span class="err">/form&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="nx">UserService</span> <span class="nx">from</span> <span class="s1">&#39;@/services/user&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">User</span> <span class="nx">from</span> <span class="s1">&#39;@/constructor/user&#39;</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Comment&#39;</span><span class="p">,</span>
  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">user</span><span class="o">:</span> <span class="k">new</span> <span class="nx">User</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
    <span class="kr">async</span> <span class="nx">handlerAddNewUser</span><span class="p">()</span> <span class="p">{</span>
      <span class="kr">await</span> <span class="nx">UserService</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/add&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">createPayload</span><span class="p">());</span>
  
      <span class="c1">// Reset form
</span><span class="c1"></span>      <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">,</span> <span class="k">new</span> <span class="nx">User</span><span class="p">())</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>
<p>Ở đây ta thấy rằng:</p>

<ul>
<li>Việc quản lý lỗi không mong muốn cho từng thuộc tính của User sẽ đơn giản hơn</li>
<li>Các thuộc tính <code>computed</code> sử dụng Component của Vue.js sẽ tự động có sẵn trong khởi tạo của User</li>
<li>Việc quản lý logic ở một nơi sẽ giúp bạn dễ dàng kiểm soát và tái sử dụng</li>
</ul>

<h3 id="ý-kiến-chuyên-gia">Ý kiến chuyên gia</h3>

<p>Theo một số ý kiến chuyên gia thì <a href="https://twitter.com/_ericelliott/status/573090480004591617">không nên sử dụng ES6 Classes</a>. Nhưng theo tôi trong trường hợp này việc sử dụng Classes trong Vue.js giúp cải thiện khả năng quản lý lỗi cũng như logic được tốt hơn.</p>

    </div>
    
      <section itemscope itemtype="//schema.org/Person" class="site-author cf">
  <img itemprop="image" src="/images/avatar.jpeg" class="site-author-picture" alt="Đặng Văn Thanh">
  <div class="site-author-description">
    <h4 itemprop="author">Đặng Văn Thanh</h4>
    <span itemprop="description">Có đam mê về lập trình và các vấn đề về phát triển web.</span>
  </div>
</section>

      
  


  <aside class="article-body article-related mt-40">
    <h3>Bài viết cùng chủ đề</h3>
    <ul>
      
      
        <li><a href="/blog/tim-kiem-voi-algolia-hugo-va-vue/">Tìm kiếm với Algolia, Hugo và Vue.js</a>
      
        <li><a href="/blog/bat-dau-voi-vue/">Bắt đầu với Vue.js</a>
      
        <li><a href="/blog/redesign-va-nhung-gi-toi-hoc/">Redesign và những gì tôi học</a>
      
        <li><a href="/blog/tao-mp3-player-voi-html5-va-css3/">Tạo MP3 Player với HTML5 và CSS3</a>
      
        <li><a href="/blog/html5-fullscreen-api/">HTML5 Fullscreen API</a>
      
    </ul>
  </aside>


    
  </div>
      </div><footer role="contentinfo" class="site-footer">
  <p>
    &copy;2013 - 2019. Được xây dựng bằng
    <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo</a>,
    <a href="https://vuejs.org/" rel="noopener" target="_blank">Vue.js</a>.
  </p>
</footer>


</main>
  </div><script defer src="//codepen.io/assets/embed/ei.js"></script>
<script defer src="//unpkg.com/vue@2.5.17/dist/vue.min.js"></script>
<script defer src="//cdn.jsdelivr.net/npm/vue-instantsearch@1.7.0/dist/vue-instantsearch.js"></script>


<script defer src="https://dangthanh.org/js/anitya.min.87d36a8e442765e0afc75780d52177aa07a30cd3414aebbd6e21050cfc3b9355.js" integrity="sha256-h9NqjkQnZeCvx1eA1SF3qgejDNNBSuu9biEFDPw7k1U="></script>
</body>
</html>

<!DOCTYPE html><html lang="en" data-astro-transition-scope="astro-smooz4hq-4"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.4.11"><title>Tìm kiếm với Algolia, Hugo và Vue.js - Dang Thanh Digital Garden</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&family=Lexend:wght@400;500;600;700&family=Source+Code+Pro&display=swap" rel="stylesheet"><script defer data-domain="dangthanh.org" src="https://plausible.io/js/script.js"></script><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/about.CYvG8MSl.css" />
<link rel="stylesheet" href="/_astro/_slug_.BcDSt7Kq.css" />
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><script type="module" src="/_astro/hoisted.CjhO55dx.js"></script><style>[data-astro-transition-scope="astro-dmvkmasx-1"] { view-transition-name: title-undefined; }@layer astro { ::view-transition-old(title-undefined) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(title-undefined) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(title-undefined) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(title-undefined) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-dmvkmasx-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-dmvkmasx-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-dmvkmasx-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-dmvkmasx-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-dmvkmasx-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-dmvkmasx-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-dmvkmasx-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-dmvkmasx-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-z5xp366c-2"] { view-transition-name: info-undefined; }@layer astro { ::view-transition-old(info-undefined) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(info-undefined) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(info-undefined) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(info-undefined) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-z5xp366c-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-z5xp366c-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-z5xp366c-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-z5xp366c-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-z5xp366c-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-z5xp366c-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-z5xp366c-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-z5xp366c-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-iukyfs2j-3"] { view-transition-name: astro-iukyfs2j-3; }@layer astro { ::view-transition-old(astro-iukyfs2j-3) { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }::view-transition-new(astro-iukyfs2j-3) { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back]::view-transition-old(astro-iukyfs2j-3) { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back]::view-transition-new(astro-iukyfs2j-3) { 
	animation-name: astroFadeIn, astroSlideFromLeft; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-iukyfs2j-3"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-iukyfs2j-3"] { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-iukyfs2j-3"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-iukyfs2j-3"] { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-iukyfs2j-3"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-iukyfs2j-3"] { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-iukyfs2j-3"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-iukyfs2j-3"] { 
	animation-name: astroFadeIn, astroSlideFromLeft; }</style><style>[data-astro-transition-scope="astro-smooz4hq-4"] { view-transition-name: astro-smooz4hq-4; }@layer astro { ::view-transition-old(astro-smooz4hq-4) { animation: none; opacity: 0; mix-blend-mode: normal; }::view-transition-new(astro-smooz4hq-4) { animation: none; mix-blend-mode: normal; }::view-transition-group(astro-smooz4hq-4) { animation: none } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-smooz4hq-4"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-smooz4hq-4"] { animation: none; mix-blend-mode: normal; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-smooz4hq-4"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-smooz4hq-4"] { animation: none; mix-blend-mode: normal; }</style></head> <body> <div class="pos_relative max-w_3xl mx_auto px_4 md:px_6 lg:px_8"> <header role="banner" class="d_flex items_center justify_space-between py_3"> <a href="/" class="fs_3xl font_700 leading_1 d_flex gap_1 transition_transform_.3s_ease hover:transform_translate(3px,_3px)"> <span class="w_10 h_10 p_1.5 shadow_lg d_inline-flex justify_center items_center border-w_1px border-style_solid border_gray.50 rounded_3px transform_translateY(1px)">D</span> <span class="w_10 h_10 p_1.5 shadow_lg d_inline-flex justify_center items_center transform_translateY(-1px) border-w_1px border-style_solid border_gray.50 rounded_3px bg_gray.900 text_white">T</span> </a> <nav role="navigation" class="d_flex items_center justify_center"> <a href="/blog" class="decoration_wavy text-decoration-line_underline underline-offset_8px decoration_2px py_2 px_3"> Blog </a><a href="/tags" class="py_2 px_3 hover:decoration_wavy hover:text-decoration-line_underline hover:underline-offset_8px hover:decoration_2px"> Tags </a><a href="/projects" class="py_2 px_3 hover:decoration_wavy hover:text-decoration-line_underline hover:underline-offset_8px hover:decoration_2px"> Projects </a><a href="/about" class="py_2 px_3 hover:decoration_wavy hover:text-decoration-line_underline hover:underline-offset_8px hover:decoration_2px"> About </a> </nav> </header> <main role="main">  <div class="article"> <div class="w_full d_flex flex_column mt_12"> <a href="/blog" class="d_inline-flex items_center text_gray.500 text-decor_none fs_sm hover:text-decor_underline hover:underline-offset_2px">
&larr; from Blog
</a> <h1 class="fs_4xl font_700 leading_1 my_3" data-astro-transition-scope="astro-dmvkmasx-1"> Tìm kiếm với Algolia, Hugo và Vue.js </h1> <div class="d_flex items_center gap_1.5 fs_sm text_gray.500 font_medium mb_8" data-astro-transition-scope="astro-z5xp366c-2"> <span>December 8, 2018</span> <span>&#8226;</span> <span>5 min read</span> </div> <div class="article" data-astro-transition-scope="astro-iukyfs2j-3">  <p>Trước đây, muốn tìm kiếm bài viết, tôi thường vào <a href="/tags">danh mục</a> và tìm kiếm các tags như <code>javascript</code>, <code>sass</code>, <code>css</code>…Và với mong muốn tìm kiếm bài viết được tốt hơn nên tôi quyết định thử nghiệm với <a href="https://www.algolia.com/">Algolia</a>, kết hợp một xíu với <a href="/blog/bat-dau-voi-vue/">Vue.js</a>.</p>
<h2 id="tại-sao-là-algolia">Tại sao là Algolia?</h2>
<p>Thực ra đối với những người làm lập trình như tôi, thì lí do đầu tiên là được học thêm một công nghệ mới. Thứ hai là sau khi thử nghiệm Algolia, thời gian kết quả tìm kiếm mà Algolia trả về rất nhanh, làm tôi cũng rất bất ngờ và mong muốn tìm hiểu thêm về Algolia.</p>
<p>Bên cạnh đó, qua quá trình mới làm quen với Algolia tôi thấy nó có những điểm nổi bật sau:</p>
<ul>
<li>Algolia cung cấp gói <a href="https://www.algolia.com/users/sign_up">miễn phí</a> cho bạn sử dụng</li>
<li>Giao diện quản lý dễ sử dụng cho phép bạn theo dõi, truy vết và giám sát các hoạt động tìm kiếm</li>
<li>Cung cấp các API Client cho nhiều ngôn ngữ như <code>JavaScript</code>, <code>Node.js</code>, <code>Go</code>, <code>C#</code></li>
<li>Các thư viện Algolia cung cấp rất hay như <a href="https://github.com/algolia/autocomplete.js">Autocomplete</a>, <a href="https://community.algolia.com/places/">Algolia Places</a></li>
</ul>
<h2 id="tạo-json-search-index-trong-hugo">Tạo JSON Search Index trong Hugo</h2>
<p><strong>Algolia</strong> cung cấp tìm kiếm theo chỉ mục với các định dạng file <code>JSON</code>, <code>CSV</code> hoặc <code>TSV</code> hoặc sử dụng <a href="https://www.algolia.com/doc/api-reference/api-methods/">API</a> để thêm thông tin tìm kiếm được đánh chỉ mục.</p>
<p>Với <strong>Hugo</strong> mình sẽ giới thiệu các bạn cách tạo ra một file <code>JSON</code> và tải tập tin đó lên Algolia.</p>
<p>Đầu tiên, ta tạo một file <code>json</code> trong <strong>layouts/_default/</strong> hoặc <strong>themes/[tên-theme-của-bạn]/layouts/_default/</strong> với tên là <strong><em>list.algolia.json</em></strong> với cấu trúc như sau.</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9">{-</span><span style="color:#D8DEE9"> $.Scratch.Add</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">index</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> slice</span><span style="color:#D8DEE9"> -</span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">}</span></span>
<span class="line"><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9">{-</span><span style="color:#D8DEE9"> $section</span><span style="color:#ECEFF4"> :</span><span style="color:#D8DEE9">=</span><span style="color:#D8DEE9"> $.Site.GetPage</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#A3BE8C">post</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Section</span><span style="color:#ECEFF4"> }</span><span style="color:#D8DEE9FF">}</span></span>
<span class="line"><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9">{-</span><span style="color:#D8DEE9"> range</span><span style="color:#D8DEE9"> .Site.AllPages</span><span style="color:#D8DEE9"> -</span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">}</span></span>
<span class="line"><span style="color:#ECEFF4">  {</span><span style="color:#D8DEE9">{-</span><span style="color:#D8DEE9"> if</span><span style="color:#D8DEE9"> or</span><span style="color:#D8DEE9"> (and</span><span style="color:#D8DEE9"> (.IsDescendant</span><span style="color:#D8DEE9"> $section)</span><span style="color:#D8DEE9"> (and</span><span style="color:#D8DEE9"> (not</span><span style="color:#D8DEE9"> .Draft)</span><span style="color:#D8DEE9"> (not</span><span style="color:#D8DEE9"> .Params.private)))</span><span style="color:#D8DEE9"> $section.IsHome</span><span style="color:#D8DEE9"> -</span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">}</span></span>
<span class="line"><span style="color:#ECEFF4">    {</span><span style="color:#D8DEE9">{-</span><span style="color:#D8DEE9"> $.Scratch.Add</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">index</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> (dict</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">objectID</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .File.UniqueID</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">date</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Date.UTC.Unix</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">description</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Description</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">dir</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .File.Dir</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">expirydate</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .ExpiryDate.UTC.Unix</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">fuzzywordcount</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .FuzzyWordCount</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">keywords</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Keywords</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">kind</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Kind</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">lang</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Lang</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">lastmod</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Lastmod.UTC.Unix</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">permalink</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Permalink</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">publishdate</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .PublishDate</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">readingtime</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .ReadingTime</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">relpermalink</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .RelPermalink</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">summary</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Summary</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">title</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Title</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">type</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Type</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">url</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Permalink</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">weight</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Weight</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">wordcount</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .WordCount</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">section</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Section</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">tags</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Params.Tags</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">categories</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Params.Categories</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">authors</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> .Params.Authors)</span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">}</span></span>
<span class="line"><span style="color:#ECEFF4">  {</span><span style="color:#D8DEE9">{-</span><span style="color:#D8DEE9"> end</span><span style="color:#D8DEE9"> -</span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">}</span></span>
<span class="line"><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9">{-</span><span style="color:#D8DEE9"> end</span><span style="color:#D8DEE9"> -</span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">}</span></span>
<span class="line"><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9">{-</span><span style="color:#D8DEE9"> $.Scratch.Get</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#8FBCBB">index</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9"> |</span><span style="color:#D8DEE9"> jsonify</span><span style="color:#D8DEE9"> -</span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">}</span></span></code></pre>
<p>Tập tin <code>JSON</code> sẽ mang những thông tin được định nghĩa ở trên như <code>authors</code>, <code>date</code>, <code>title</code>…</p>
<p>Tập tin sẽ được tạo ra từ những thông tin các bài viết chứa trong thư mục <strong>post</strong>. Bạn có thể thay <strong>post</strong> bằng thư mục bài viết của bạn trong thư mục <strong>content</strong></p>
<p>Ở đây tôi sử dụng một số <a href="https://gohugo.io/categories/functions">cú pháp về Functions</a> trong Hugo. Bạn có thể tham khảo thêm nhé.</p>
<p>Tiếp theo ta mở tập tin <strong>config.toml</strong> và thêm một số cấu hình vào:</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#ECEFF4">[</span><span style="color:#D8DEE9FF">outputFormats.Algolia</span><span style="color:#ECEFF4">]</span></span>
<span class="line"><span style="color:#D8DEE9">  baseName</span><span style="color:#ECEFF4"> =</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#A3BE8C">algolia</span><span style="color:#ECEFF4">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9">  isPlainText</span><span style="color:#ECEFF4"> =</span><span style="color:#81A1C1"> true</span></span>
<span class="line"><span style="color:#D8DEE9">  mediaType</span><span style="color:#ECEFF4"> =</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#A3BE8C">application/json</span><span style="color:#ECEFF4">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9">  notAlternative</span><span style="color:#ECEFF4"> =</span><span style="color:#81A1C1"> true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4">[</span><span style="color:#D8DEE9FF">params.algolia</span><span style="color:#ECEFF4">]</span></span>
<span class="line"><span style="color:#D8DEE9">  vars</span><span style="color:#ECEFF4"> =</span><span style="color:#ECEFF4"> [</span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">title</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#A3BE8C">description</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#A3BE8C">summary</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#A3BE8C">date</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#A3BE8C">lastmod</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#A3BE8C">permalink</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">]</span></span>
<span class="line"><span style="color:#D8DEE9">  params</span><span style="color:#ECEFF4"> =</span><span style="color:#ECEFF4"> [</span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">categories</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#A3BE8C">tags</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4">[</span><span style="color:#D8DEE9FF">outputs</span><span style="color:#ECEFF4">]</span></span>
<span class="line"><span style="color:#D8DEE9">  home</span><span style="color:#ECEFF4"> =</span><span style="color:#ECEFF4"> [</span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">HTML</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#A3BE8C">RSS</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">,</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#A3BE8C">Algolia</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">]</span></span></code></pre>
<p>Sau đó bạn chạy lệnh</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#88C0D0">$</span><span style="color:#A3BE8C"> hugo</span></span></code></pre>
<p>Bạn sẽ có một tập tin là <strong>algolia.json</strong> trong thư mục <strong>public</strong></p>
<h2 id="tải-tập-tin-lên-alolia">Tải tập tin lên Alolia</h2>
<p>Sau khi có tập tin <strong>algolia.json</strong> và <a href="https://www.algolia.com/users/sign_up">đăng ký</a> xong một tài khoản Algolia. Bạn đăng nhập vào <a href="https://www.algolia.com/dashboard">Algolia Dashboard</a>.</p>
<ul>
<li>
<p>Bạn tạo một App sử dụng Algolia. Ở đây tôi ví dụ app có tên là <em>dangthanhblog</em></p>
<picture> <source srcset="/_astro/algolia_create_app.CAxI2wtS_egz5G.avif" type="image/avif"><source srcset="/_astro/algolia_create_app.CAxI2wtS_egz5G.avif" type="image/webp"> <img src="/_astro/algolia_create_app.CAxI2wtS_egz5G.avif" alt="Tạo app sử dụng Algolia" width="626" height="550" loading="lazy" decoding="async"> </picture>
</li>
<li>
<p>Ở giao diện Dashboard bạn chọn <strong>Indices</strong> và nhấn vào <strong>Create index</strong> giả sử với tên là <em>posts</em></p>
<picture> <source srcset="/_astro/algolia_create_index.B2KRpehb_Z1iGiQg.avif" type="image/avif"><source srcset="/_astro/algolia_create_index.B2KRpehb_Z1iGiQg.avif" type="image/webp"> <img src="/_astro/algolia_create_index.B2KRpehb_Z1iGiQg.avif" alt="Tạo index trong Algolia" width="636" height="316" loading="lazy" decoding="async"> </picture>
<p>Chọn <strong>Manage index</strong> -&gt; <strong>Upload file</strong> chọn tập tin <strong>algolia.json</strong> trong thư mục <strong>public</strong> đã tạo được ở trên.</p>
</li>
<li>
<p>Ngoài cách tải trực tiếp tập tin lên, bạn có thể dùng <a href="https://www.npmjs.com/package/atomic-algolia">atomic-algolia</a> để tải tập tin lên Algolia thông qua NPM scripts hoặc serverless nhé.</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#88C0D0">$</span><span style="color:#A3BE8C"> npm</span><span style="color:#A3BE8C"> install</span><span style="color:#A3BE8C"> atomic-algolia</span><span style="color:#A3BE8C"> dotenv</span><span style="color:#A3BE8C"> --save-dev</span></span></code></pre>
<p>Tạo một file <code>.env</code> với các thông số</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#D8DEE9FF">ALGOLIA_APP_ID=ALGOLIA_APP_ID</span></span>
<span class="line"><span style="color:#D8DEE9FF">ALGOLIA_ADMIN_KEY=YOUR_ALGOLIA_ADMIN_KEY</span></span>
<span class="line"><span style="color:#D8DEE9FF">ALGOLIA_INDEX_NAME=posts</span></span>
<span class="line"><span style="color:#D8DEE9FF">ALGOLIA_INDEX_FILE=algolia.json</span></span></code></pre>
<p>Ở đây tôi giả sử indexName tôi sử dụng là <strong>posts</strong> và tập tin có tên là <strong>algolia.json</strong></p>
<p>Sử dụng NPM scripts trong <strong>package.json</strong></p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">scripts</span><span style="color:#ECEFF4">&quot;</span><span style="color:#D8DEE9FF">: </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">  &quot;</span><span style="color:#8FBCBB">algolia</span><span style="color:#ECEFF4">&quot;</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> &quot;</span><span style="color:#A3BE8C">atomic-algolia</span><span style="color:#ECEFF4">&quot;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span></code></pre>
<p>Chạy lệnh để tải file <code>algolia.json</code> lên Algolia</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff;overflow-x:auto" tabindex="0"><code><span class="line"><span>$ npm run algolia</span></span></code></pre>
</li>
</ul>
<h2 id="tạo-algolia-component-với-vuejs">Tạo Algolia Component với Vue.js</h2>
<p>Để hiển thị trên Hugo. tôi tạo ra một trang <code>static templates</code> với tên gọi là <code>archives.md</code> trong thư mục <strong>content</strong> như sau:</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#D8DEE9FF">---</span></span>
<span class="line"><span style="color:#81A1C1">type</span><span style="color:#ECEFF4">:</span><span style="color:#81A1C1"> &#39;</span><span style="color:#A3BE8C">static</span><span style="color:#81A1C1">&#39;</span></span>
<span class="line"><span style="color:#81A1C1">layout</span><span style="color:#ECEFF4">:</span><span style="color:#81A1C1"> &#39;</span><span style="color:#A3BE8C">archives</span><span style="color:#81A1C1">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF">---</span></span></code></pre>
<p>Sau đó tạo thêm file HTML có tên là <strong>layouts/static/archives.html</strong> tương ứng với <code>layout</code> được khai báo ở trên.</p>
<p>Algolia cung cấp một thư viện JavaScript để bạn dễ dàng kết với Algolia thông qua <a href="https://community.algolia.com/instantsearch.js/">Instantsearch.js</a> hoặc <a href="https://v2--vue-instantsearch.netlify.com/getting-started/migration.html">Vue Instantsearch</a>.</p>
<p>Vì tôi đã <a href="/bat-dau-voi-vue/">giới thiệu Vue.js</a> có một tính năng rất hay đó là Component. Nên tôi quyết định viết Component này sử dụng <a href="https://v2--vue-instantsearch.netlify.com/getting-started/migration.html">Vue InstantSearch</a> vừa giúp bạn biết thêm về cách xây dựng Component trong Vue thông qua thuộc tính <strong><em>props</em></strong>.</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#D8DEE9">Vue</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">component</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">SearchAlgoliaComponent</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#88C0D0">  name</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> &#39;</span><span style="color:#A3BE8C">SearchAlgoliaComponent</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#88C0D0">  template</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> `</span></span>
<span class="line"><span style="color:#A3BE8C">    &lt;ais-index</span></span>
<span class="line"><span style="color:#A3BE8C">      :app-id=&quot;appId&quot;</span></span>
<span class="line"><span style="color:#A3BE8C">      :api-key=&quot;apiKey&quot;</span></span>
<span class="line"><span style="color:#A3BE8C">      :index-name=&quot;indexName&quot;</span></span>
<span class="line"><span style="color:#A3BE8C">      :routing=&quot;true&quot;&gt;</span></span>
<span class="line"><span style="color:#A3BE8C">      &lt;ais-search-box placeholder=&quot;Tìm kiếm tiêu đề hoặc nội dung bài viết...&quot;&gt;&lt;/ais-search-box&gt;</span></span>
<span class="line"><span style="color:#A3BE8C">      &lt;ais-highlight :hit=&quot;hit&quot; attribute=&quot;title&quot;&gt;&lt;/ais-highlight&gt;</span></span>
<span class="line"><span style="color:#A3BE8C">      &lt;ais-results&gt;</span></span>
<span class="line"><span style="color:#A3BE8C">        // Your display results</span></span>
<span class="line"><span style="color:#A3BE8C">      &lt;/ais-results&gt;</span></span>
<span class="line"><span style="color:#A3BE8C">    &lt;/ais-index&gt;</span></span>
<span class="line"><span style="color:#ECEFF4">  `</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#88C0D0">  props</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#88C0D0">    appId</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#88C0D0">      type</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9"> String</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#88C0D0">      require</span><span style="color:#ECEFF4">:</span><span style="color:#81A1C1"> true</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#ECEFF4">    },</span></span>
<span class="line"><span style="color:#88C0D0">    apiKey</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#88C0D0">      type</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9"> String</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#88C0D0">      required</span><span style="color:#ECEFF4">:</span><span style="color:#81A1C1"> true</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#ECEFF4">    },</span></span>
<span class="line"><span style="color:#88C0D0">    indexName</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#88C0D0">      type</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9"> String</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#88C0D0">      required</span><span style="color:#ECEFF4">:</span><span style="color:#81A1C1"> true</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#ECEFF4">    },</span></span>
<span class="line"><span style="color:#88C0D0">    routing</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#88C0D0">      type</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9"> Boolean</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#88C0D0">      default</span><span style="color:#ECEFF4">:</span><span style="color:#81A1C1"> true</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#ECEFF4">    },</span></span>
<span class="line"><span style="color:#ECEFF4">  },</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">)</span></span></code></pre>
<p>Vậy là ta đã có một Component sử dụng Vue cho Algolia. Giờ ta sẽ sử dụng nó trong <strong>layouts/static/archives.html</strong> nhé.</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#81A1C1">&lt;main</span><span style="color:#8FBCBB"> id</span><span style="color:#ECEFF4">=</span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">app</span><span style="color:#ECEFF4">&quot;</span><span style="color:#81A1C1">&gt;</span></span>
<span class="line"><span style="color:#81A1C1">  &lt;search-algolia-component</span><span style="color:#8FBCBB"> :appId</span><span style="color:#ECEFF4">=</span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">yourAppId</span><span style="color:#ECEFF4">&quot;</span><span style="color:#8FBCBB"> :apiKey</span><span style="color:#ECEFF4">=</span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">yourApiKey</span><span style="color:#ECEFF4">&quot;</span><span style="color:#8FBCBB"> :indexName</span><span style="color:#ECEFF4">=</span><span style="color:#ECEFF4">&quot;</span><span style="color:#A3BE8C">yourIndexName</span><span style="color:#ECEFF4">&quot;</span><span style="color:#81A1C1"> /&gt;</span></span>
<span class="line"><span style="color:#81A1C1">&lt;/main&gt;</span></span></code></pre>
<p><strong>appId</strong> và <strong>apiKey</strong> bạn vào trong Dashboard của Algolia và chọn <strong>API keys</strong> để lấy thông tin nhé.</p>
<p>Giờ ta đã có một trang tìm kiếm sử dụng Algolia, Hugo và Vue.js. Bạn có thể <a href="/archives/">trải nghiệm</a> hoặc có thể chỉnh sửa thêm cho <code>SearchAlgoliaComponent</code> theo cách bạn muốn hiển thị nhé.</p>  </div> <div class="d_flex items_center"> <div class="d_flex items_center gap-y_0.5"> <a href="/tags/javascript" class="d_inline-flex items_center py_2 px_1 text_gray.500 text_lowercase hover:text-decor_underline hover:underline-offset_2px">
#JavaScript </a><a href="/tags/hugo" class="d_inline-flex items_center py_2 px_1 text_gray.500 text_lowercase hover:text-decor_underline hover:underline-offset_2px">
#Hugo </a><a href="/tags/vue" class="d_inline-flex items_center py_2 px_1 text_gray.500 text_lowercase hover:text-decor_underline hover:underline-offset_2px">
#Vue </a> </div> </div> </div> </div>  </main> <hr class="border-style_solid border_gray.300 w_full mt_6"> <footer role="contentinfo" class="py_5"> <div class="d_flex items_center flex_column md:justify_space-between md:flex_row"> <div>
&copy; 2024. Made with <span>❤</span>&nbsp;
<a href="https://astro.build/" target="_blank" rel="noopener noreferrer">Astro</a> </div> <div class="d_flex items_center justify_end gap_1.5">  <a href="https://github.com/dangvanthanh" target="_blank" rel="noopener noreferrer" class="s"> github </a> <span>&bull;</span>  <a href="https://www.linkedin.com/in/dangthanh/" target="_blank" rel="noopener noreferrer" class="s"> linkedin </a> <span>&bull;</span>  <a href="https://twitter.com/dangvanthanh" target="_blank" rel="noopener noreferrer" class="s"> twitter </a> <span>&bull;</span> <a href="mailto:dangvanthanh@dangthanh.org" class="s"> email </a> </div> </div> </footer> </div>  </body> </html>
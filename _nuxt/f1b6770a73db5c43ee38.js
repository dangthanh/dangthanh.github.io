(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{190:function(n,t){n.exports={attributes:{title:"HTML5 Geolocation và Leaflet",slug:"html5-geolocation-va-leaflet",date:"2013-08-15",tags:["javascript"]},html:'<p>Geolocation là một API mới của HTML5 cho phép bạn truy cập vào vị trí hiện tại của bạn trên thiết bị.</p>\n<p>Geolocation gồm 3 phương thức:</p>\n<pre class="hljs"><code><span class="hljs-comment">/**\n * Lấy vị trí hiện tại của thiết bị\n */</span>\nnavigator.geolocation.getCurrentPosition();\n\n<span class="hljs-comment">/**\n * Cho phép khởi tạo một xử lí khi thiết bị thay đổi vị trí\n */</span>\nnavigator.geolocation.watchPosition();\n\n<span class="hljs-comment">/**\n * Xóa xử lí được khởi tạo trước đó bởi watchPosition()\n */</span>\nnavigator.geolocation.clearWatch()\n</code></pre>\n<h3>Lấy vị trí hiện tại sử dụng Geolocation</h3>\n<p>Để lấy vị trí hiện tại ta có thể sử dụng phương thức</p>\n<ul>\n<li><strong>navigator.geolocation.getCurrentPosition()</strong></li>\n</ul>\n<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">success</span>(<span class="hljs-params">position</span>) </span>{\n\t<span class="hljs-keyword">var</span>\tlatitude = position.coords.latitude,\n\t\tlongitude = position.coords.longitude,\n\t\taltitude = position.coords.altitude,\n\t\taccuracy = position.coords.accuracy;\n\n\t<span class="hljs-comment">// Hiển thị các thông số về vị trí hiện tại của bạn.</span>\n\t<span class="hljs-built_in">console</span>.log(latitude);\n\t<span class="hljs-built_in">console</span>.log(longitude);\n\t<span class="hljs-built_in">console</span>.log(altitude);\n\t<span class="hljs-built_in">console</span>.log(accuracy);\n}\n\n<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">error</span>(<span class="hljs-params"></span>) </span>{\n\t<span class="hljs-built_in">console</span>.log(<span class="hljs-string">\'Không thể truy cập đến vị trí hiện tại.\'</span>);\n}\n\n<span class="hljs-keyword">var</span> options = {\n  <span class="hljs-attr">enableHighAccuracy</span>: <span class="hljs-literal">true</span>,\n  <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>,\n  <span class="hljs-attr">maximumAge</span>: <span class="hljs-number">0</span>\n}\n\nnavigator.geolocation.getCurrentPosition(success, error, options);\n</code></pre>\n<h3>Leaflet là gì?</h3>\n<p><a href="http://leafletjs.com/">Leaflet</a> là một thư viện JavaScript mã nguồn mở cung cấp các tương tác với bản đồ thân thiện với các thiết bị di động.</p>\n<p>Cũng như Google Map API. Nhưng Leaflet được thiết kế đơn giản, hiệu quả và dễ sử dụng:</p>\n<ul>\n<li>Dễ dàng tương tác với HTML5 và CSS3.</li>\n<li>Hỗ trợ rất nhiều plugin.</li>\n<li>Tài liệu hướng dẫn về API rất tốt và dễ sử dụng</li>\n<li>Cung cấp đầy đủ các tính năng để tương tác với bản đồ.</li>\n</ul>\n<p>Với API của Leaflet ta có thể tương tác với bản đồ một cách linh hoạt hơn. Sau đây là ví dụ làm việc đơn giản với Leaflet</p>\n<pre class="hljs"><code><span class="hljs-comment">/**\n * Khởi tạo bản đồ với "map" div\n * với vị trí latitude, longitude và zoom bản đồ\n */</span>\n<span class="hljs-keyword">var</span> map = L.map(<span class="hljs-string">\'map\'</span>, {\n\t<span class="hljs-attr">center</span>: [latitude, longitude],\n\t<span class="hljs-attr">zoom</span>: <span class="hljs-number">16</span>\n});\n\n<span class="hljs-comment">/**\n * Khởi tạo và hiển thị các lớp trên bản đồ\n * Bạn vào Cloudmade.com đăng kí một tài khoản để có thể lấy API\n */</span>\n<span class="hljs-keyword">var</span> tile = <span class="hljs-string">\'http://{s}.tile.cloudmade.com/{key}/{styleId}/256/{z}/{x}/{y}.png\'</span>;\n\nL.tileLayer(tile, {\n    <span class="hljs-attr">key</span>: <span class="hljs-string">\'760506895e284217a7442ce2efe97797\'</span>, <span class="hljs-comment">// Đây là API mình đã đăng kí với cloudmade</span>\n    <span class="hljs-attr">styleId</span>: <span class="hljs-number">103288</span>,\n    <span class="hljs-attr">maxZoom</span>: <span class="hljs-number">16</span>\n  }).addTo(map);\n\n<span class="hljs-comment">/**\n * Đánh dấu vị trí trên bản đồ\n */</span>\n<span class="hljs-keyword">var</span> maker = L.marker([latitude, longitude]).addTo(map);\n<span class="hljs-comment">// Hiển thị Popup tại vị trí đánh dấu</span>\nmarker.bindPopup(<span class="hljs-string">\'&lt;p&gt;Tiêu đề...&lt;/p&gt;\'</span>).openPopup();\n</code></pre>\n<p><iframe src="https://codesandbox.io/embed/web-geolocation-and-leaflet-rwcwo?view=preview" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe></p>\n<p>Ngoài ra, bạn có thể vào những liên kết sau để tìm hiểu thêm về Geolocation và Leaflet:</p>\n<ul>\n<li><a href="http://www.w3.org/TR/geolocation-API/">W3 - Geolocation API</a></li>\n<li><a href="https://developer.mozilla.org/en-US/docs/WebAPI/Using_geolocation">Developer Mozilla</a></li>\n<li><a href="http://leafletjs.com/reference.html">Leaflet API</a></li>\n<li><a href="http://cloudmade.com/">Cloudmade</a></li>\n</ul>\n'}}}]);
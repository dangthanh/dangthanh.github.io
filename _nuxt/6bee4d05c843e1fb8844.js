(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{191:function(n,t){n.exports={attributes:{title:"PostCSS",slug:"postcss",date:"2018-11-01T18:03:37.000Z",tags:["css","sass","postcss"]},html:'<p>Lần trước tôi có đề cập tới <a href="/blog/redesign-va-nhung-gi-t%C3%B4i-hoc/#postcss">PostCSS</a>. Nay tôi sẽ giới thiệu tổng quan về PostCSS cho các bạn. Cũng như <a href="/blog/su-dung-sass/">Sass</a>, PostCSS cũng cung cấp các chức năng như Sass:</p>\n<ul>\n<li>Khai báo biến</li>\n<li>Nhúng các tập tin CSS (Partial import)</li>\n<li>Cú pháp lồng (Nesting)</li>\n<li>Sử dụng lại với Mixins</li>\n<li>Kế thừa (Extends)</li>\n</ul>\n<h3>Sử dụng PostCSS</h3>\n<p>Trước hết PostCSS một công cụ cho việc chuyển đổi CSS sử dụng JavaScript. Bạn có thể sử dụng nhiều công cụ như Webpack, Rollup, Gulp hay Grunt để chuyển đổi PostCSS sang CSS. Nhưng để đơn giản bạn nên bắt đầu làm quen PostCSS với <a href="https://github.com/postcss/postcss-cli">PostCSS CLI</a></p>\n<p>Cách sử dụng để chuyển đổi như sau</p>\n<pre class="hljs"><code><span class="hljs-meta">$</span><span class="bash"> postcss [input.css] -o [output.css] </span>\n</code></pre>\n<p><strong>Chú ý:</strong> <em>Bạn có thể đổi <code>[input.css]</code> và <code>[output.css]</code> thành tên tập tin bạn mong muốn.</em></p>\n<p>Hoặc bạn có thể cấu hình thêm ở tập tin <strong>postcss.config.js</strong></p>\n<pre class="hljs"><code><span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">plugins</span>: {\n    <span class="hljs-string">\'postcss-import\'</span>: {},\n    <span class="hljs-string">\'postcss-each\'</span>: {},\n    <span class="hljs-string">\'postcss-nested\'</span>: {},\n    <span class="hljs-string">\'postcss-preset-env\'</span>: { <span class="hljs-attr">stage</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">browsers</span>: <span class="hljs-string">\'last 2 versions\'</span> }\n  }\n};\n</code></pre>\n<h3>Autoprefixer và Browserlist</h3>\n<p><a href="https://github.com/postcss/autoprefixer"><strong>Autoprefixer</strong></a> là một PostCSS plugin phân tích cú pháp CSS của bạn và thêm các tiền tố (vendor prefixes) như <code>-wekit-</code>, <code>-moz-</code>, <code>-ms-</code>, <code>-o-</code> tương ứng với các trình duyệt.</p>\n<pre class="hljs"><code><span class="hljs-selector-class">.example</span> {\n  <span class="hljs-attribute">display</span>: grid;\n  <span class="hljs-attribute">user-select</span>: none;\n}\n</code></pre>\n<p>Biên dịch thành CSS</p>\n<pre class="hljs"><code><span class="hljs-selector-class">.example</span> {\n  <span class="hljs-attribute">display</span>: -ms-grid;\n  <span class="hljs-attribute">display</span>: grid;\n  <span class="hljs-attribute">-webkit-user-select</span>: none;\n  <span class="hljs-attribute">-moz-user-select</span>: none;\n  <span class="hljs-attribute">-ms-user-select</span>: none;\n  <span class="hljs-attribute">user-select</span>: none;\n}\n</code></pre>\n<p>Autoprefixer còn cho phép bạn có thể lựa chọn tiền tố cho từng trình duyệt cụ thể</p>\n<pre class="hljs"><code><span class="hljs-selector-tag">autoprefixer</span>({ <span class="hljs-attribute">browsers</span>: <span class="hljs-string">\'last 2 versions, &gt; 1%\'</span> })\n</code></pre>\n<p>Với <a href="https://github.com/browserslist/browserslist"><strong>Browserlist</strong></a> thì việc cấu hình tiền tố cho từng trình duyệt cụ thể sẽ dễ dàng hơn với việc cấu hình trong <strong><code>package.json</code></strong></p>\n<pre class="hljs"><code>{\n  <span class="hljs-attr">"browserslist"</span>: [\n    <span class="hljs-string">"last 1 version"</span>,\n    <span class="hljs-string">"&gt; 1%"</span>,\n  ]\n}\n</code></pre>\n<p>hoặc trong tập tin <strong><code>.browserslistrc</code></strong></p>\n<pre class="hljs"><code><span class="hljs-selector-tag">last</span> 1 <span class="hljs-selector-tag">version</span>\n&gt; 1%\n</code></pre>\n<h3>PostCSS Preset Env</h3>\n<p>Ngoài việc định nghĩa biến bằng các thuộc tính CSS. <a href="https://preset-env.cssdb.org/"><strong>PostCSS Preset Env</strong></a> còn có những biến định nghĩa <em>media queries</em>, <em>selectors</em>, các chức năng về <em>color function</em>, <em>pseudo-class</em>, <em>nesting rules</em>... Bên cạnh đó còn giúp chuyển đổi các CSS hiện đại thành CSS mà hầu hết trình duyệt đều hỗ trợ.</p>\n<pre class="hljs"><code><span class="hljs-selector-pseudo">:root</span> {\n  <span class="hljs-attribute">--length</span>: <span class="hljs-number">24px</span>;\n}\n\n<span class="hljs-keyword">@custom-media</span> --tablet (<span class="hljs-attribute">min-width:</span> <span class="hljs-number">40em</span>);\n<span class="hljs-keyword">@custom-selector</span> :--heading h1, h2, h3, h4, h5, h6;\n\n<span class="hljs-selector-class">.round</span> {\n  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">var</span>(--length);\n  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--length);\n  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">100%</span>;\n}\n\n<span class="hljs-selector-class">.site</span> <span class="hljs-selector-pseudo">:--heading</span> + <span class="hljs-selector-tag">p</span> {\n  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1rem</span>;\n}\n\n<span class="hljs-keyword">@media</span> (--tablet) {\n  <span class="hljs-selector-class">.site</span> {\n    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;\n  }\n}\n</code></pre>\n<p>Biên dịch thành CSS</p>\n<pre class="hljs"><code><span class="hljs-selector-class">.round</span> {\n  <span class="hljs-attribute">width</span>: <span class="hljs-number">24px</span>;\n  <span class="hljs-attribute">height</span>: <span class="hljs-number">24px</span>;\n  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">100%</span>;\n}\n\n<span class="hljs-selector-class">.site</span> <span class="hljs-selector-tag">h1</span> + <span class="hljs-selector-tag">p</span>,\n<span class="hljs-selector-class">.site</span> <span class="hljs-selector-tag">h2</span> + <span class="hljs-selector-tag">p</span>,\n<span class="hljs-selector-class">.site</span> <span class="hljs-selector-tag">h3</span> + <span class="hljs-selector-tag">p</span>,\n<span class="hljs-selector-class">.site</span> <span class="hljs-selector-tag">h4</span> + <span class="hljs-selector-tag">p</span>,\n<span class="hljs-selector-class">.site</span> <span class="hljs-selector-tag">h5</span> + <span class="hljs-selector-tag">p</span>,\n<span class="hljs-selector-class">.site</span> <span class="hljs-selector-tag">h6</span> + <span class="hljs-selector-tag">p</span> {\n  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1rem</span>;\n}\n\n<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width:</span> <span class="hljs-number">40em</span>) {\n  <span class="hljs-selector-class">.site</span> {\n    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;\n  }\n}\n</code></pre>\n<h3>CSS Modules</h3>\n<p>Mỗi lúc viết CSS bạn lo lắng tên của các <code>classes</code> được sử dụng quá chung chung. <a href="https://github.com/css-modules/css-modules"><strong>CSS Modules</strong></a> giúp tên các <code>classes</code> bạn định nghĩa được ánh xạ từ tên chung đó một cách có ý nghĩa nhất. CSS Modules thực tế được dùng nhiều với các bạn viết JavaScript nhiều hơn so với các bạn Web Designer (chỉ viết HTML và CSS) vì những ưu điểm:</p>\n<ul>\n<li>Dễ dàng tái sử dụng</li>\n<li>Không bị ảnh hưởng tới những chỗ khác</li>\n<li>Phụ thuộc rõ ràng vào chính bản thân nó</li>\n<li>Không có phạm vi Global mà chỉ nằm trong Scoped</li>\n</ul>\n<p>Ví dụ ta có một file <code>style.css</code></p>\n<pre class="hljs"><code><span class="hljs-comment">/* style.css */</span>\n<span class="hljs-selector-class">.className</span> {\n  <span class="hljs-attribute">color</span>: green;\n}\n</code></pre>\n<p>Khi nhúng vào trong JavaScript module.</p>\n<pre class="hljs"><code><span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">\'./style.css\'</span>;\n\nelement.innerHTML = <span class="hljs-string">\'&lt;div class="\'</span> + styles.className + <span class="hljs-string">\'"&gt;\'</span>;\n</code></pre>\n<p>Sau khi thực thi ta sẽ được kết quả</p>\n<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">\n  <span class="hljs-selector-class">._styles__title_2qkr5</span> {\n    <span class="hljs-attribute">color</span>: green;\n  }\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"element"</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"_styles__title_2qkr5"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n</code></pre>\n<h3>Stylelint</h3>\n<p><a href="https://stylelint.io/"><strong>Stylelint</strong></a> giúp bạn tránh những lỗi và đảm bảo convention cũng như cải thiện CSS khi bạn code CSS được toàn vẹn với những quy tắc chuẩn hoá và chặt chẽ. Stylelint cũng cung cấp cho PostCSS một plugin để dễ dàng cấu hình.</p>\n<h3>PostCSS Có Gì Hay</h3>\n<p>Tới đây, một số bạn sẽ thắc mắc vậy PostCSS có gì hay hơn Sass nhỉ? Sass hầu như cũng làm được các chức năng trên cơ mà. Tuy nhiên PostCSS còn có những ưu điểm:</p>\n<h4>Từ Sass đến PostCSS</h4>\n<p>Bạn dễ dàng có thể tái sử dụng code <a href="https://github.com/jonathantneal/postcss-sass">Sass</a> hay <a href="https://github.com/postcss/postcss-scss">SCSS</a> trong PostCSS, thậm chí <a href="https://github.com/shellscape/postcss-less">Less</a> hay <a href="https://github.com/seaneking/poststylus">Stylus</a>.</p>\n<h4>PostCSS Plugin</h4>\n<p>Hệ thống <a href="https://www.postcss.parts/">plugin của PostCSS</a> rất đồ sộ và rất nhiều <a href="https://github.com/postcss/postcss/blob/master/docs/plugins.md">plugin mạnh mẽ</a> như:</p>\n<ul>\n<li>\n<p><a href="https://github.com/hail2u/node-css-mqpacker">CSS MQPacker</a>: đóng gói các quy tắc về <em>media queries</em> giống nhau về thành một</p>\n<pre class="hljs"><code><span class="hljs-selector-tag">h1</span> {\n  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">30px</span>;\n}\n\n<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width:</span> <span class="hljs-number">768px</span>) {\n  <span class="hljs-selector-tag">h1</span> {\n    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">36px</span>;\n  }\n}\n\n<span class="hljs-selector-tag">h3</span> {\n  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;\n}\n\n<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width:</span> <span class="hljs-number">768px</span>) {\n  <span class="hljs-selector-tag">h3</span> {\n    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;\n  }\n}\n</code></pre>\n<p>Biên dịch thành CSS</p>\n<pre class="hljs"><code><span class="hljs-selector-tag">h1</span> {\n  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">30px</span>;\n}\n\n<span class="hljs-selector-tag">h3</span> {\n  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;\n}\n\n<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width:</span> <span class="hljs-number">768px</span>) {\n  <span class="hljs-selector-tag">h1</span> {\n    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">36px</span>;\n  }\n\n  <span class="hljs-selector-tag">h3</span> {\n    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;\n  }\n}\n</code></pre>\n</li>\n<li>\n<p><a href="https://cssnano.co/">CSSNano</a>: Tối ưu code CSS như <em>minification</em>, <em>compresses inline SVG</em>, <em>duplicates</em>, <em>comments</em>, <em>unused rule</em>...</p>\n</li>\n</ul>\n<h4>Tuỳ biến PostCSS</h4>\n<p>Chỉ cần một ít kiến thức về JavaScript bạn có thể dễ dàng <a href="https://github.com/postcss/postcss/blob/master/docs/writing-a-plugin.md">viết plugin cho PostCSS</a> với phong cách của riêng mình như:</p>\n<ul>\n<li><a href="https://github.com/chancancode/postcss-canadian-stylesheets">Canadian Style Sheets</a></li>\n<li><a href="https://github.com/dangvanthanh/postcss-tipsy">Tipsy</a></li>\n<li><a href="https://github.com/juanfran/postcss-trolling">Trolling Style Sheets</a></li>\n<li><a href="https://github.com/dangvanthanh/postcss-longshadow-text">Long Shadow Text</a></li>\n</ul>\n'}}}]);
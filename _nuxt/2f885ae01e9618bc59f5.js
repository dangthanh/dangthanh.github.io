(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{195:function(n,t){n.exports={attributes:{title:"Tạo MP3 Player với HTML5 và CSS3",slug:"tao-mp3-player-voi-html5-va-css3",date:"2013-10-06",tags:["css","javascript"]},html:'<p>Bạn muốn tự tạo MP3 Player với phong cách riêng của mình. HTML5 Audio giúp bạn dễ dàng tùy biến giao diện và dễ dàng nhúng vào trang web của bạn.</p>\n<p>Với các trình duyệt hỗ trợ HTML5 Audio, bạn có thể sử dụng:</p>\n<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">audio</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"audio.mp3"</span> <span class="hljs-attr">preload</span>=<span class="hljs-string">"auto"</span> <span class="hljs-attr">controls</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">loop</span>&gt;</span>\n\t<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Trình duyệt của bạn không hỗ trợ HTML5 Audio<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">audio</span>&gt;</span>\nHoặc\n<span class="hljs-tag">&lt;<span class="hljs-name">audio</span> <span class="hljs-attr">preload</span>=<span class="hljs-string">"auto"</span> <span class="hljs-attr">controls</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">loop</span>&gt;</span>\n\t<span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"audio.mp3"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"audio/mp3"</span>&gt;</span>\n\t<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Trình duyệt của bạn không hỗ trợ HTML5 Audio<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">audio</span>&gt;</span>\n</code></pre>\n<p>Ở ví dụ trên ta đã sử dụng một số thuộc tính của HTML5 Audio:</p>\n<table>\n<thead>\n<tr>\n<th>Thuộc tính</th>\n<th>Mô tả</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>autoplay</td>\n<td>Tập tin nhạc sẽ tự động chạy khi bắt đầu</td>\n</tr>\n<tr>\n<td>controls</td>\n<td>Các điều khiển cho audio sẽ hiển thị theo mặc định của trình duyệt</td>\n</tr>\n<tr>\n<td>loop</td>\n<td>Tập tin nhạc sẽ tự động lặp lại sau khi kết thúc</td>\n</tr>\n<tr>\n<td>preload</td>\n<td>Tải thông tin của tập tin nhạc <br> - none: Không load thông tin tập nhạc <br> - auto: Tự động load thông tin tập tin nhạc <br> - metadata: Load các siêu dữ liệu của tập tin nhạc</td>\n</tr>\n<tr>\n<td>src</td>\n<td>Nguồn của tập tin nhạc</td>\n</tr>\n</tbody>\n</table>\n<h3>Tạo MP3 Player</h3>\n<p>Mình đã giới thiệu chung về HTML5 Audio. Giờ mình sẽ giới thiệu các bạn cách để xây dựng một MP3 Player cho riêng mình.</p>\n<h4>HTML</h4>\n<p>Đầu tiên mình sẽ xây dựng một audio với các thành phần sau:</p>\n<ul>\n<li>Tập tin nhạc</li>\n<li>Loading: tạo hiệu ứng đơn giản khi chạy nhạc</li>\n<li>Controls: gồm các điều khiển Play, Pause, Volumn, Seeking</li>\n</ul>\n<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"player"</span>&gt;</span>\n\t<span class="hljs-tag">&lt;<span class="hljs-name">audio</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"player__source"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"audio.mp3"</span>&gt;</span>\n\t\t<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Trình duyệt của bạn không hỗ trợ HTML5 Audio<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n\t<span class="hljs-tag">&lt;/<span class="hljs-name">audio</span>&gt;</span>\n\t<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"player__loading"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n\t<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"player__control"</span>&gt;</span>\n\t\t<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"playPause"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n\t\t<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"currentTime"</span>&gt;</span>00:00<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>\n\t\t<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"seek"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"range"</span> <span class="hljs-attr">min</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0"</span>&gt;</span>\n\t\t<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"durationTime"</span>&gt;</span>00:00<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>\n\t\t<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"muted"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n\t<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n</code></pre>\n<h4>JavaScript</h4>\n<p>HTML5 Audio cung cấp nhiều sự kiện giúp bạn điều khiển và đồng bộ hóa phát lại tập tin nhạc.</p>\n<p>Muốn làm việc với HTML5 Audio đầu tiên ta truy vấn đến các thành phần audio mà ta đã xây dựng ở trên.</p>\n<pre class="hljs"><code><span class="hljs-keyword">var</span> player = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">\'player__source\'</span>),\n\tplayLoading = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">\'.player__loading span\'</span>),\n\tplayPause = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">\'playPause\'</span>),\n\tcurrentTime = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">\'currentTime\'</span>),\n\tseek = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">\'seek\'</span>),\n\tdurationTime = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">\'durationTime\'</span>),\n\tmuted = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">\'muted\'</span>);\n</code></pre>\n<p><strong>Play và Pause</strong></p>\n<p>Ta tiến hành kiểm tra nếu nhạc đang chạy sẽ nút Pause sẽ hiển thị và ngược lại.</p>\n<pre class="hljs"><code>playPause.addEventListener(<span class="hljs-string">\'click\'</span>, playPauseMusic, <span class="hljs-literal">false</span>);\n\n<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">playPauseMusic</span>(<span class="hljs-params"></span>) </span>{\n\t<span class="hljs-keyword">if</span> (player.paused) {\n\t\tplayer.play();\n\t\t<span class="hljs-comment">// Kiểm tra thời gian hiện tại của bài nhạc</span>\n\t\ttimeInterval = <span class="hljs-keyword">set</span><span class="hljs-title">Interval</span>(<span class="hljs-params">timeUpdateMusic, <span class="hljs-number">100</span></span>);\n\t\t// <span class="hljs-title">Thay</span> đổ<span class="hljs-title">i</span> <span class="hljs-title">gi</span>á <span class="hljs-title">tr</span>ị <span class="hljs-title">c</span>ủ<span class="hljs-title">a</span> <span class="hljs-title">seek</span>\n\t\t<span class="hljs-title">seek</span>.<span class="hljs-title">addEventListener</span>(<span class="hljs-params"><span class="hljs-string">\'change\'</span>, seekMusic, false</span>);\n\t} <span class="hljs-title">else</span> {\n\t\tplayer.pause();\n\t}\n}\n\n<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeUpdateMusic</span>(<span class="hljs-params"></span>) </span>{\n\t<span class="hljs-comment">// Thời gian toàn bộ của bài nhạc</span>\n\tdurationTime.innerHTML = player.duration;\n\t<span class="hljs-comment">// Thời gian hiện tại của bài nhạc</span>\n\tcurrentTime.innerHTML = player.currentTime;\n\tseek.max = player.duration;\n\tseek.value = player.currentTime;\n}\n\n<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">seekMusic</span>(<span class="hljs-params"></span>) </span>{\n\tplayer.currentTime = seek.value;\n}\n</code></pre>\n<p><strong>Volumn - Âm Thanh</strong></p>\n<p>Tương tự như Play và Pause, ta cũng kiểm tra volumn của nhạc đang tắt hay bật. Ở đây mình xây dựng volumn chỉ có hai chức năng mở âm thanh và tắt âm thanh.</p>\n<pre class="hljs"><code>muted.addEventListener(<span class="hljs-string">\'click\'</span>, mutedMusic, <span class="hljs-literal">false</span>);\n\n<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mutedMusic</span>(<span class="hljs-params"></span>) </span>{\n\t<span class="hljs-keyword">if</span> (player.muted) {\n\t\t<span class="hljs-comment">// Mở âm thanh</span>\n\t\tplayer.muted = <span class="hljs-literal">false</span>;\n\t} <span class="hljs-keyword">else</span> {\n\t\t<span class="hljs-comment">// Tắt âm thanh</span>\n\t\tplayer.muted = <span class="hljs-literal">true</span>;\n\t}\n}\n</code></pre>\n<h3>CSS3</h3>\n<p>Với CSS3 bạn có thể sử dụng CSS3 Animation và Transtion để làm cho Player của bạn sinh động hơn. Mình sẽ hướng dẫn chi tiết hơn ở những bài viết sau. Ở ví dụ dưới đây mình <strong><a href="/blog/su-dung-icon-fonts/">sử dụng icon font</a></strong> để làm các nút như play và volumn.</p>\n<p><iframe src="https://codesandbox.io/embed/web-simple-player-mp3-wmtxb?view=preview" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe></p>\n<p>Bạn có thể tham khảo các liên kết sau để có thể tìm hiểu sâu hơn về HTML5 Audio:</p>\n<ul>\n<li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Events/Media_events">Mozilla Developer Network</a></li>\n<li><a href="http://html5doctor.com/html5-audio-the-state-of-play/">HTML5 Doctor</a></li>\n</ul>\n'}}}]);
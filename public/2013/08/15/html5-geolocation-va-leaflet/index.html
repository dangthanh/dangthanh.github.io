<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>HTML5 Geolocation và Leaflet</title>
	<meta name="description" content="Blog về HTML/HTML5, CSS/CSS3, JavaScript">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/assets/css/app-f720513d.css">
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
	<link rel="shortcut icon" href="/favicon.ico">
	<link href="" rel="alternate" type="application/rss+xml" title="Blog về HTML/HTML5, CSS/CSS3, JavaScript" />
</head>
<body>
	<div id="app" class="bg-near-white">
		<header role="banner" class="bb b--black-10 black-70 bg-green">
			<div class="db dt-l w-100 mw7 pt3 pb3 center">
				<div class="db dtc-l v-mid w-100 w-25-l tc tl-l mb2 mb0-l">
					<a href="/" class="link dim white f4">DT</a>
				</div>
				<nav role="navigation" class="db dtc-l v-mid w-100 w-75-l tc tr-l">
  <a href="/projects" class="link dim white f5 f5-l dib mr3 mr4-l">Dự án</a>
  <a href="/about" class="link dim white f5 f5-l dib">Giới thiệu</a>
</nav>

			</div>
		</header>

<main role="main" class="bg-white center mw7 mt4 pa3">
	<article class="article" itemscope itemtype="//schema.org/Article">
		<header class="mb4" itemprop="headline">
			<h1 class="f2-ns mb2 fw3 tc" itemprop="name">HTML5 Geolocation và Leaflet</h1>
			<time class="f5 gray db mt0 mb0 fw1 tc" datetime="15-08-2013"><span itemprop="datePublished">Đăng ngày 15-08-2013</span></time>
		</header>
		<div class="f4 lh-copy fw1" itemprop="articleBody">

<p>Geolocation là một API mới của HTML5 cho phép bạn truy cập vào vị trí hiện tại của bạn trên thiết bị.</p>

<p>Geolocation gồm 3 phương thức:</p>

<pre><code class="language-javascript">/**
 * Lấy vị trí hiện tại của thiết bị
 */
navigator.geolocation.getCurrentPosition();

/**
 * Cho phép khởi tạo một xử lí khi thiết bị thay đổi vị trí
 */
navigator.geolocation.watchPosition();

/**
 * Xóa xử lí được khởi tạo trước đó bởi watchPosition()
 */
navigator.geolocation.clearWatch()
</code></pre>

<h3 id="lấy-vị-trí-hiện-tại-sử-dụng-geolocation">Lấy vị trí hiện tại sử dụng Geolocation</h3>

<p>Để lấy vị trí hiện tại ta có thể sử dụng phương thức</p>

<ul>
<li><strong>navigator.geolocation.getCurrentPosition()</strong></li>
</ul>

<pre><code class="language-javascript">function success(position) {
	var	latitude = position.coords.latitude,
		longitude = position.coords.longitude,
		altitude = position.coords.altitude,
		accuracy = position.coords.accuracy;

	// Hiển thị các thông số về vị trí hiện tại của bạn.
	console.log(latitude);
	console.log(longitude);
	console.log(altitude);
	console.log(accuracy);
}

function error() {
	console.log('Không thể truy cập đến vị trí hiện tại.');
}

var options = {
  enableHighAccuracy: true,
  timeout: 5000,
  maximumAge: 0
}

navigator.geolocation.getCurrentPosition(success, error, options);
</code></pre>

<h3 id="leaflet-là-gì">Leaflet là gì?</h3>

<p><a href="http://leafletjs.com/">Leaflet</a> là một thư viện JavaScript mã nguồn mở cung cấp các tương tác với bản đồ thân thiện với các thiết bị di động.</p>

<p>Cũng như Google Map API. Nhưng Leaflet được thiết kế đơn giản, hiệu quả và dễ sử dụng:</p>

<ul>
<li>Dễ dàng tương tác với HTML5 và CSS3.</li>
<li>Hỗ trợ rất nhiều plugin.</li>
<li>Tài liệu hướng dẫn về API rất tốt và dễ sử dụng</li>
<li>Cung cấp đầy đủ các tính năng để tương tác với bản đồ.</li>
</ul>

<p>Với API của Leaflet ta có thể tương tác với bản đồ một cách linh hoạt hơn. Sau đây là ví dụ làm việc đơn giản với Leaflet</p>

<pre><code class="language-javascript">/**
 * Khởi tạo bản đồ với &quot;map&quot; div
 * với vị trí latitude, longitude và zoom bản đồ
 */
var map = L.map('map', {
	center: [latitude, longitude],
	zoom: 16
});

/**
 * Khởi tạo và hiển thị các lớp trên bản đồ
 * Bạn vào Cloudmade.com đăng kí một tài khoản để có thể lấy API
 */
L.tileLayer('http://{s}.tile.cloudmade.com/{key}/{styleId}/256/{z}/{x}/{y}.png', {
    key: '760506895e284217a7442ce2efe97797', // Đây là API mình đã đăng kí với cloudmade
    styleId: 103288,
    maxZoom: 16
  }).addTo(map);

/**
 * Đánh dấu vị trí trên bản đồ
 */
var maker = L.marker([latitude, longitude]).addTo(map);
// Hiển thị Popup tại vị trí đánh dấu
marker.bindPopup('&lt;p&gt;Tiêu đề...&lt;/p&gt;').openPopup();
</code></pre>





<div class="tc mt4 mb4">
	<a href="/playground/html5-geolocation-va-leaflet/" class="f5 link br2 ba ph4 pv2 dib">Xem Demo</a>
	<a href="#" class="f5 link br2 ba ph4 pv2 dib">Tải Về</a>
</div>


<p>** Ngoài ra, bạn có thể vào những liên kết sau để tìm hiểu thêm về Geolocation và Leaflet:</p>

<ul>
<li><a href="http://www.w3.org/TR/geolocation-API/">W3 - Geolocation API</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/WebAPI/Using_geolocation">Developer Mozilla</a></li>
<li><a href="http://leafletjs.com/reference.html">Leaflet API</a></li>
<li><a href="http://cloudmade.com/">Cloudmade</a></li>
</ul>
</div>
	</article>
	<section class="center mw7 pt3 pb3">
	<div class="cf bg-light-green pa3">
		<img src="https://avatars2.githubusercontent.com/u/2674850?v=3&s=100" class="fl br-100 h3 w3 dib mr3" alt="avatar">
		<div class="fl">
			<h4 class="f4 mt0 mb0 fw7">Đặng Văn Thanh</h4>
			<span>Có đam mê về lập trình web và các vấn đề về phát triển web.</span>
		</div>
	</div>
</section>

	<section class="center mw7 pt3 pb3">
	<div id="disqus_thread"></div>
	<script>
		var disqus_shortname = 'dangvanthanh';
		(function() {
			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>

</main>
		<footer role="infocontent" class="pv2">
			<div class="center mw7 pt3 pb3">
				<p>
					&copy;2013 - <script>document.write(new Date().getFullYear())</script>. Được xây dựng bằng
					<a href="https://gohugo.io/" class="dib link dim green">Hugo</a>,
					<a href="https://vuejs.org/" class="dib link dim green">Vue.js</a> và
					<a href="http://tachyons.io/" class="dib link dim green">Tachyons</a>.
				</p>
			</div>
		</footer>
	</div>
	<script src="//cdnjs.cloudflare.com/ajax/libs/vue/2.1.6/vue.min.js" defer></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/prism.min.js" defer></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/webfont/1.6.27/webfontloader.js" defer></script>
	<script src="/assets/js/app-312f323c.js" defer></script>
	<script type="text/javascript" defer>
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-41117458-1']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>

</body>
</html>


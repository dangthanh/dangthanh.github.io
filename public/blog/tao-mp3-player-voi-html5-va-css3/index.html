<!DOCTYPE html>
<html lang="vi"><meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Tạo MP3 Player với HTML5 và CSS3 | Dang Thanh Blog</title>
<meta name="description" content="Blog chia sẻ về web và phát triển web">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="57x57" href="/images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
<link rel="manifest" href="/images/favicon/manifest.json">
<link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="preload" href="/fonts/TimesNewerRoman-Regular.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="/fonts/TimesNewerRoman-Bold.otf" as="font" type="font/otf" crossorigin>

<link rel="stylesheet" href="https://dangthanh.org/css/anitya.min.17f0b64c93bdd4a786f7f4e09e9dcd1f4ee50c6df8646ad8dff76f4e21c1e38c.css" integrity="sha256-F/C2TJO91KeG9/Tgnp3NH07lDG34ZGrY3/dvTiHB44w=">
<link href="" rel="alternate" type="application/rss+xml" title="Dang Thanh Blog">
<body>
      <a href="#" class="site-corner js-corner" aria-label="Night">
        <i class="icon icon-moon"></i>
      </a>
      <div class="site"><header role="banner" class="site-header">
  <div class="site-logo">
      <a href="/">DT</a>
  </div>
  <nav role="navigation" class="site-nav">
    <ul class="no-list m-0 p-0">
      <li>
        <a href="/" data-link="home" class="no-underline hover:line-through">Bài viết</a>
      </li>
      <li>
        <a href="/tags" data-link="tags" class="no-underline hover:line-through">Lưu trữ</a>
      </li>
      <li>
        <a href="/about" data-link="about" class="no-underline hover:line-through">Về tui</a>
      </li>
    </ul>
  </nav>
</header>
<main role="main" class="site-main">
          <div id="main"><div class="article article-single" itemscope itemtype="//schema.org/Article">
    
      <h2 itemprop="headline">Tạo MP3 Player với HTML5 và CSS3</h2>
      <ul class="no-list p-0 m-0">
      
        <li class="inline-block"><a href="/tags/css" class="tag tag-css">css</a></li>
      
        <li class="inline-block"><a href="/tags/javascript" class="tag tag-javascript">javascript</a></li>
      
      </ul>
    

    <div class="article-body" itemprop="articleBody">
      

<p>Bạn muốn tự tạo MP3 Player với phong cách riêng của mình. HTML5 Audio giúp bạn dễ dàng tùy biến giao diện và dễ dàng nhúng vào trang web của bạn.</p>

<p>Với các trình duyệt hỗ trợ HTML5 Audio, bạn có thể sử dụng:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">audio</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;audio.mp3&#34;</span> <span class="na">preload</span><span class="o">=</span><span class="s">&#34;auto&#34;</span> <span class="na">controls</span> <span class="na">autoplay</span> <span class="na">loop</span><span class="p">&gt;</span>
	<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Trình duyệt của bạn không hỗ trợ HTML5 Audio<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">audio</span><span class="p">&gt;</span>
Hoặc
<span class="p">&lt;</span><span class="nt">audio</span> <span class="na">preload</span><span class="o">=</span><span class="s">&#34;auto&#34;</span> <span class="na">controls</span> <span class="na">autoplay</span> <span class="na">loop</span><span class="p">&gt;</span>
	<span class="p">&lt;</span><span class="nt">source</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;audio.mp3&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;audio/mp3&#34;</span><span class="p">&gt;</span>
	<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Trình duyệt của bạn không hỗ trợ HTML5 Audio<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">audio</span><span class="p">&gt;</span></code></pre></div>
<p>Ở ví dụ trên ta đã sử dụng một số thuộc tính của HTML5 Audio:</p>

<table>
<thead>
<tr>
<th>Thuộc tính</th>
<th>Mô tả</th>
</tr>
</thead>

<tbody>
<tr>
<td>autoplay</td>
<td>Tập tin nhạc sẽ tự động chạy khi bắt đầu</td>
</tr>

<tr>
<td>controls</td>
<td>Các điều khiển cho audio sẽ hiển thị theo mặc định của trình duyệt</td>
</tr>

<tr>
<td>loop</td>
<td>Tập tin nhạc sẽ tự động lặp lại sau khi kết thúc</td>
</tr>

<tr>
<td>preload</td>
<td>Tải thông tin của tập tin nhạc <br> - none: Không load thông tin tập nhạc <br> - auto: Tự động load thông tin tập tin nhạc <br> - metadata: Load các siêu dữ liệu của tập tin nhạc</td>
</tr>

<tr>
<td>src</td>
<td>Nguồn của tập tin nhạc</td>
</tr>
</tbody>
</table>

<h3 id="tạo-mp3-player">Tạo MP3 Player</h3>

<p>Mình đã giới thiệu chung về HTML5 Audio. Giờ mình sẽ giới thiệu các bạn cách để xây dựng một MP3 Player cho riêng mình.</p>

<h4 id="html">HTML</h4>

<p>Đầu tiên mình sẽ xây dựng một audio với các thành phần sau:</p>

<ul>
<li>Tập tin nhạc</li>
<li>Loading: tạo hiệu ứng đơn giản khi chạy nhạc</li>
<li>Controls: gồm các điều khiển Play, Pause, Volumn, Seeking</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;player&#34;</span><span class="p">&gt;</span>
	<span class="p">&lt;</span><span class="nt">audio</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;player__source&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;audio.mp3&#34;</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Trình duyệt của bạn không hỗ trợ HTML5 Audio<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
	<span class="p">&lt;/</span><span class="nt">audio</span><span class="p">&gt;</span>
	<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;player__loading&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
	<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;player__control&#34;</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;playPause&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;currentTime&#34;</span><span class="p">&gt;</span>00:00<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;seek&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;range&#34;</span> <span class="na">min</span><span class="o">=</span><span class="s">&#34;0&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;0&#34;</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;durationTime&#34;</span><span class="p">&gt;</span>00:00<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;muted&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
	<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></div>
<h4 id="javascript">JavaScript</h4>

<p>HTML5 Audio cung cấp nhiều sự kiện giúp bạn điều khiển và đồng bộ hóa phát lại tập tin nhạc.</p>

<p>Muốn làm việc với HTML5 Audio đầu tiên ta truy vấn đến các thành phần audio mà ta đã xây dựng ở trên.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">player</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;player__source&#39;</span><span class="p">),</span>
	<span class="nx">playLoading</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.player__loading span&#39;</span><span class="p">),</span>
	<span class="nx">playPause</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;playPause&#39;</span><span class="p">),</span>
	<span class="nx">currentTime</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;currentTime&#39;</span><span class="p">),</span>
	<span class="nx">seek</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;seek&#39;</span><span class="p">),</span>
	<span class="nx">durationTime</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;durationTime&#39;</span><span class="p">),</span>
	<span class="nx">muted</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;muted&#39;</span><span class="p">);</span>
</code></pre></div>
<p><strong>Play và Pause</strong></p>

<p>Ta tiến hành kiểm tra nếu nhạc đang chạy sẽ nút Pause sẽ hiển thị và ngược lại.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">playPause</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">playPauseMusic</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">playPauseMusic</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="nx">player</span><span class="p">.</span><span class="nx">paused</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">player</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
		<span class="c1">// Kiểm tra thời gian hiện tại của bài nhạc
</span><span class="c1"></span>		<span class="nx">timeInterval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">timeUpdateMusic</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
		<span class="c1">// Thay đổi giá trị của seek
</span><span class="c1"></span>		<span class="nx">seek</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="nx">seekMusic</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nx">player</span><span class="p">.</span><span class="nx">pause</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">timeUpdateMusic</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// Thời gian toàn bộ của bài nhạc
</span><span class="c1"></span>	<span class="nx">durationTime</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">player</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
	<span class="c1">// Thời gian hiện tại của bài nhạc
</span><span class="c1"></span>	<span class="nx">currentTime</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">player</span><span class="p">.</span><span class="nx">currentTime</span><span class="p">;</span>
	<span class="nx">seek</span><span class="p">.</span><span class="nx">max</span> <span class="o">=</span> <span class="nx">player</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
	<span class="nx">seek</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">player</span><span class="p">.</span><span class="nx">currentTime</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">seekMusic</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">player</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">=</span> <span class="nx">seek</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Volumn - Âm Thanh</strong></p>

<p>Tương tự như Play và Pause, ta cũng kiểm tra volumn của nhạc đang tắt hay bật. Ở đây mình xây dựng volumn chỉ có hai chức năng mở âm thanh và tắt âm thanh.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">muted</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">mutedMusic</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">mutedMusic</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="nx">player</span><span class="p">.</span><span class="nx">muted</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">// Mở âm thanh
</span><span class="c1"></span>		<span class="nx">player</span><span class="p">.</span><span class="nx">muted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="c1">// Tắt âm thanh
</span><span class="c1"></span>		<span class="nx">player</span><span class="p">.</span><span class="nx">muted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="css3">CSS3</h3>

<p>Với CSS3 bạn có thể sử dụng CSS3 Animation và Transtion để làm cho Player của bạn sinh động hơn. Mình sẽ hướng dẫn chi tiết hơn ở những bài viết sau. Ở ví dụ dưới đây mình <strong><a href="/blog/su-dung-icon-fonts/">sử dụng icon font</a></strong> để làm các nút như play và volumn.</p>




 


<p data-height="226"
	data-theme-id="652"
	data-slug-hash="jbBZjw"
	data-user="dangvanthanh"
	data-default-tab="result"
	class='codepen'>
</p>


<p>** Bạn có thể tham khảo các liên kết sau để có thể tìm hiểu sâu hơn về HTML5 Audio:</p>

<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Events/Media_events">Mozilla Developer Network</a></li>
<li><a href="http://html5doctor.com/html5-audio-the-state-of-play/">HTML5 Doctor</a></li>
</ul>

    </div>
    
    <section itemscope itemtype="//schema.org/Person" class="site-author cf">
  <img itemprop="image" src="https://avatars2.githubusercontent.com/u/2674850?v=3&s=100" class="fl" alt="Đặng Văn Thanh">
  <div class="fl">
    <h4 itemprop="author">Đặng Văn Thanh</h4>
    <span itemprop="description">Có đam mê về lập trình và các vấn đề về phát triển web.</span>
  </div>
</section>

    
  </div>
          </div><footer role="contentinfo" class="site-footer">
  <p>
    &copy;2013 - 2018. Được xây dựng bằng
    <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo</a>,
    <a href="https://vuejs.org/" rel="noopener" target="_blank">Vue.js</a>.
  </p>
</footer>


</main>
      </div>
<script type="text/javascript" defer>
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-41117458-1']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>



<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-0445843198703009",
    enable_page_level_ads: true
  });
</script>


<script defer src="//codepen.io/assets/embed/ei.js"></script>
<script defer src="//unpkg.com/vue@2.5.17/dist/vue.min.js"></script>


<script defer src="https://dangthanh.org/js/anitya.min.e329310d6192670c9569925e653e8ed7f8572999881ec6bf18f67acf20c77a80.js" integrity="sha256-4ykxDWGSZwyVaZJeZT6O1/hXKZmIHsa/GPZ6zyDHeoA="></script>
</body>
</html>
